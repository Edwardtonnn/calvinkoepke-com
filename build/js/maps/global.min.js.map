{"version":3,"sources":["global.js"],"names":["stickify","selector","el","document","querySelector","elTop","window","addEventListener","top","getOffset","triggerScroll","checkStickify","offsetTarget","scrollY","classList","contains","stickifyElement","unStickifyElement","elWidth","getBoundingClientRect","width","add","setAttribute","remove","left","scrollX","event","MouseEvent","view","bubbles","cancelable","dispatchEvent","loadJS","src","cb","ref","getElementsByTagName","script","createElement","async","parentNode","insertBefore","onload","loaded","Promise","resolve","readyState","ready","then","init","code","nav","insertAdjacentHTML","toggle"],"mappings":"cAMA,WAwEC,QAASA,GAASC,GAEjB,GAAIC,GAAQC,SAASC,cAAcH,GAAnCI,EAAYF,EAASC,GAAAA,GAGrBE,QAAAC,iBAAA,SAAA,WACAD,EAAOC,EAAAA,GAAPC,IACCH,EAAQI,EAAUP,KAInBI,OAAAC,iBAAA,SAAA,WACAD,EAAOC,EAAAA,KAIPJ,SAAAI,iBAAA,mBAAAG,KAUD,QAASC,GAAcT,EAAIU,GAErBN,OAAOO,QAAUD,IAAkBV,EAAGY,UAAUC,SAAS,aAC7DC,EAAgBd,GAGZI,OAAOO,QAAUD,GAAgBV,EAAGY,UAAUC,SAAS,aAC3DE,EAAkBf,GASpB,QAASc,GAAgBd,GACxB,GAAIgB,GAAUhB,EAAGiB,wBAAwBC,KACzClB,GAAGY,UAAUO,IAAI,YACjBnB,EAAGoB,aAAa,QAAS,UAAYJ,EAAU,eAQhD,QAASD,GAAkBf,GAC1BA,EAAGY,UAAUS,OAAO,YACpBrB,EAAGoB,aAAa,QAAS,IAS1B,QAASb,GAAUP,GAElB,MADAA,GAAKA,EAAGiB,yBAEPK,KAAMtB,EAAGsB,KAAOlB,OAAOmB,QACvBjB,IAAKN,EAAGM,IAAMF,OAAOO,SASvB,QAASH,KACR,GAAIgB,GAAQ,GAAIC,YAAW,UAC1BC,KAAQtB,OACRuB,SAAW,EACXC,YAAc,GAEfxB,QAAOyB,cAAcL,GAOtB,QAASM,GAAQC,EAAKC,GACpB,GAAIC,GAAWhC,SAASiC,qBAAsB,UAA9C,GACIC,EAAWlC,SAASmC,cAAe,SAOvC,OANAD,GAAOJ,IAAPA,EACAI,EAAOE,OAAQ,EACfJ,EAAIK,WAAWC,aAAcJ,EAAQF,GACjCD,GAAqB,kBAARA,KAChBG,EAAOK,OAASR,GAEVG,EApKT,GAUAM,GAAA,WAAA,MAAA,IAAAC,SAIC,SAAAC,GACC1C,SAASI,iBAAiB,mBAAoB,WAFjC,aAAToC,SAASG,YAAAD,UAbD,WAAA,MAAM,IAAID,SACvB,SAAAC,GACC1C,SAASI,iBAAiB,mBAAoB,WAFlC,YAARwC,SAAQD,YAAAD,YAadG,KAUA,WAMY7C,OAHH8C,SAAO7C,cAAA,aAQd4B,EAFGkB,4DAUJP,KAASK,KAAK,WADdhD,EAAA,gBACA2C,EAASK,2BAMT,IAAIG,GAAMhD,SAASC,cAAc,eAGjC+C,GAAIC,mBAAmB,cAAe,2DAGtCjD,SAASC,cAAc,gBAAgBG,iBAAiB,QAAS,WADjE4C,EAAArC,UAAAuC,OAAA","file":"../global.min.js","sourcesContent":["/**\n * JavaScript functions for the theme (no jQuery).\n *\n * @since 2.0.0\n *\n */\n(function() {\n\n\t\"use strict\";\n\n\t/**\n\t * Promise to resolve the document ready state.\n\t */\n\tconst ready = () => new Promise(\n\t\tresolve => {\n\t\t\tdocument.addEventListener('readystatechange', () => {\n\t\t\t\tif (document.readyState !== 'loading') {\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t);\n\n\t/**\n\t * Promise to resolve the document loaded state.\n\t */\n\tconst loaded = () => new Promise(\n\t\tresolve => {\n\t\t\tdocument.addEventListener('readystatechange', () => {\n\t\t\t\tif (document.readyState === 'complete') {\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t);\n\n\t// Initialize Prism syntax and sticky sidebars.\n\tready().then(init());\n\n\tfunction init() {\n\n\t\t// Check for content.\n\t\tvar code = document.querySelector('pre,code');\n\n\t\t// Load the script if there is any pre/code tags.\n\t\tif (code !== null) {\n\n\t\t\t// Prism script.\n\t\t\tvar src  = '/wp-content/themes/calvinkoepke-com/build/js/prism.min.js';\n\n\t\t\tloadJS(src);\n\t\t\t\n\t\t}\n\n\t\t// Wait till document loaded to preserve positioning.\n\t\tloaded().then(() => {\n\t\t\tstickify('.nav-primary');\n\t\t\tstickify('.sidebar .enews-widget');\n\t\t});\n\n\t\t// Setup mobile menu toggle.\n\t\tvar nav = document.querySelector('.nav-primary');\n\n\t\t// Add toggle button.\n\t\tnav.insertAdjacentHTML('beforeBegin', '<button class=\"button menu-toggle\">Toggle Menu</button>');\n\n\t\t// Setup event handler.\n\t\tdocument.querySelector('.menu-toggle').addEventListener('click', function() {\n\t\t\tnav.classList.toggle('visible');\n\t\t});\n\n\t}\n\n\t/**\n\t * Helper function to make an element sticky on scroll.\n\t * @param  string selector Selector to be used (uses querySelector).\n\t * @since 2.0.0\n\t */\n\tfunction stickify(selector) {\n\n\t\tvar el    = document.querySelector(selector),\n\t\t\telTop = getOffset(el).top;\n\n\t\t// Update values on window resize.\n\t\twindow.addEventListener('resize', function() {\n\t\t\telTop = getOffset(el).top;\n\t\t\tcheckStickify(el, elTop);\n\t\t});\n\n\t\t// Update sticky element on scroll position.\n\t\twindow.addEventListener('scroll', function() {\n\t\t\tcheckStickify(el, elTop);\n\t\t});\n\n\t\t// Trigger scroll event on load.\n\t\tdocument.addEventListener('DOMContentLoaded', triggerScroll());\n\n\t}\n\n\t/**\n\t * Helper function to determine sticky state.\n\t *\n\t * @since 2.0.0\n\t */\n\tfunction checkStickify(el, offsetTarget) {\n\n\t\tif ( window.scrollY > offsetTarget && ! el.classList.contains('stickify') ) {\n\t\t\tstickifyElement(el);\n\t\t}\n\n\t\tif ( window.scrollY < offsetTarget && el.classList.contains('stickify') ) {\n\t\t\tunStickifyElement(el);\n\t\t}\n\t}\n\n\t/**\n\t * Helper function to initiate sticky state.\n\t *\n\t * @since 2.0.0\n\t */\n\tfunction stickifyElement(el) {\n\t\tvar elWidth = el.getBoundingClientRect().width;\n\t\tel.classList.add('stickify');\n\t\tel.setAttribute('style', 'width: ' + elWidth + 'px; top: 0;');\n\t}\n\n\t/**\n\t * Helper function to denitiate sticky state.\n\t *\n\t * @since 2.0.0\n\t */\n\tfunction unStickifyElement(el) {\n\t\tel.classList.remove('stickify');\n\t\tel.setAttribute('style', '');\n\t}\n\n\t/**\n\t * Helper function to get the offset.\n\t * @param  node   el DOM Node to get the offset for.\n\t * @return object    Object containing offset information.\n\t * @since  2.0.0\n\t */\n\tfunction getOffset(el) {\n\t\tel = el.getBoundingClientRect();\n\t\treturn {\n\t\t\tleft: el.left + window.scrollX,\n\t\t\ttop: el.top + window.scrollY\n\t\t}\n\t}\n\n\t/**\n\t * Manually trigger a scroll event.\n\t * @return undefined\n\t * @since 2.0.0\n\t */\n\tfunction triggerScroll() {\n\t\tvar event = new MouseEvent('scroll', {\n\t\t\t'view': window,\n\t\t\t'bubbles': true,\n\t\t\t'cancelable': false\n\t\t});\n\t\twindow.dispatchEvent(event);\n\t}\n\n\t/**!\n\t * Helper function for loading async scripts.\n\t * Load a JS file asynchronously. [c]2014 @scottjehl, Filament Group, Inc. (Based on http://goo.gl/REQGQ by Paul Irish). Licensed MIT\n\t */\n\tfunction loadJS( src, cb ){\n \t\tvar ref      = document.getElementsByTagName( \"script\" )[ 0 ];\n \t\tvar script   = document.createElement( \"script\" );\n \t\tscript.src   = src;\n \t\tscript.async = true;\n \t\tref.parentNode.insertBefore( script, ref );\n \t\tif (cb && typeof(cb) === \"function\") {\n \t\t\tscript.onload = cb;\n \t\t}\n \t\treturn script;\n \t};\n\n})();\n"]}