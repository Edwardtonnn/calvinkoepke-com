{"version":3,"sources":["global.js"],"names":["stickify","selector","el","document","querySelector","elTop","getOffset","top","window","addEventListener","checkStickify","triggerScroll","offsetTarget","scrollY","classList","contains","stickifyElement","unStickifyElement","elWidth","getBoundingClientRect","width","add","setAttribute","remove","left","scrollX","event","MouseEvent","view","bubbles","cancelable","dispatchEvent","code","prismScript","createElement","src","type","body","appendChild","nav","insertAdjacentHTML","toggle"],"mappings":"CAMA,WAwCC,QAASA,GAASC,GAEjB,GAAIC,GAAQC,SAASC,cAAcH,GAClCI,EAAQC,EAAUJ,GAAIK,GAGvBC,QAAOC,iBAAiB,SAAU,WACjCJ,EAAQC,EAAUJ,GAAIK,IACtBG,EAAcR,EAAIG,KAInBG,OAAOC,iBAAiB,SAAU,WACjCC,EAAcR,EAAIG,KAInBF,SAASM,iBAAiB,mBAAoBE,KAS/C,QAASD,GAAcR,EAAIU,GAErBJ,OAAOK,QAAUD,IAAkBV,EAAGY,UAAUC,SAAS,aAC7DC,EAAgBd,GAGZM,OAAOK,QAAUD,GAAgBV,EAAGY,UAAUC,SAAS,aAC3DE,EAAkBf,GASpB,QAASc,GAAgBd,GACxB,GAAIgB,GAAUhB,EAAGiB,wBAAwBC,KACzClB,GAAGY,UAAUO,IAAI,YACjBnB,EAAGoB,aAAa,QAAS,UAAYJ,EAAU,eAQhD,QAASD,GAAkBf,GAC1BA,EAAGY,UAAUS,OAAO,YACpBrB,EAAGoB,aAAa,QAAS,IAS1B,QAAShB,GAAUJ,GAElB,MADAA,GAAKA,EAAGiB,yBAEPK,KAAMtB,EAAGsB,KAAOhB,OAAOiB,QACvBlB,IAAKL,EAAGK,IAAMC,OAAOK,SASvB,QAASF,KACR,GAAIe,GAAQ,GAAIC,YAAW,UAC1BC,KAAQpB,OACRqB,SAAW,EACXC,YAAc,GAEftB,QAAOuB,cAAcL,GAzHtBvB,SAASM,iBAAiB,mBAAoB,WAG7C,GAAIuB,GAAO7B,SAASC,cAAc,YAG9B6B,EAAe9B,SAAS+B,cAAc,SAC1CD,GAAYE,IAAO,4DACnBF,EAAYG,KAAO,kBAGN,OAATJ,GACHxB,OAAOC,iBAAiB,OAAQ,WAAaN,SAASkC,KAAKC,YAAYL,KAGxEzB,OAAOC,iBAAiB,OAAQ,WAC/BT,EAAS,gBACTA,EAAS,2BAIV,IAAIuC,GAAMpC,SAASC,cAAc,eAGjCmC,GAAIC,mBAAmB,cAAe,2DAGtCrC,SAASC,cAAc,gBAAgBK,iBAAiB,QAAS,WAChE8B,EAAIzB,UAAU2B,OAAO","file":"../global.min.js","sourcesContent":["/**\n * JavaScript functions for the theme (no jQuery).\n *\n * @since 2.0.0\n *\n */\n(function() {\n\n\tdocument.addEventListener('DOMContentLoaded', function() {\n\n\t\t// Check for content.\n\t\tvar code = document.querySelector('pre,code');\n\n\t\t// Prism script.\n\t\tvar prismScript  = document.createElement('script');\n\t\tprismScript.src  = '/wp-content/themes/calvinkoepke-com/build/js/prism.min.js';\n\t\tprismScript.type = 'text/javascript';\n\n\t\t// Load the script if there is any pre/code tags.\n\t\tif (code !== null) {\n\t\t\twindow.addEventListener('load', function() { document.body.appendChild(prismScript); });\n\t\t}\n\n\t\twindow.addEventListener('load', function() {\n\t\t\tstickify('.nav-primary');\n\t\t\tstickify('.sidebar .enews-widget');\n\t\t});\n\n\t\t// Setup mobile menu toggle.\n\t\tvar nav = document.querySelector('.nav-primary');\n\n\t\t// Add toggle button.\n\t\tnav.insertAdjacentHTML('beforeBegin', '<button class=\"button menu-toggle\">Toggle Menu</button>');\n\n\t\t// Setup event handler.\n\t\tdocument.querySelector('.menu-toggle').addEventListener('click', function() {\n\t\t\tnav.classList.toggle('visible');\n\t\t});\n\n\t});\n\n\t/**\n\t * Helper function to make an element sticky on scroll.\n\t * @param  string selector Selector to be used (uses querySelector).\n\t * @since 2.0.0\n\t */\n\tfunction stickify(selector) {\n\n\t\tvar el    = document.querySelector(selector),\n\t\t\telTop = getOffset(el).top;\n\n\t\t// Update values on window resize.\n\t\twindow.addEventListener('resize', function() {\n\t\t\telTop = getOffset(el).top;\n\t\t\tcheckStickify(el, elTop);\n\t\t});\n\n\t\t// Update sticky element on scroll position.\n\t\twindow.addEventListener('scroll', function() {\n\t\t\tcheckStickify(el, elTop);\n\t\t});\n\n\t\t// Trigger scroll event on load.\n\t\tdocument.addEventListener('DOMContentLoaded', triggerScroll());\n\n\t}\n\n\t/**\n\t * Helper function to determine sticky state.\n\t *\n\t * @since 2.0.0\n\t */\n\tfunction checkStickify(el, offsetTarget) {\n\n\t\tif ( window.scrollY > offsetTarget && ! el.classList.contains('stickify') ) {\n\t\t\tstickifyElement(el);\n\t\t}\n\n\t\tif ( window.scrollY < offsetTarget && el.classList.contains('stickify') ) {\n\t\t\tunStickifyElement(el);\n\t\t}\n\t}\n\n\t/**\n\t * Helper function to initiate sticky state.\n\t *\n\t * @since 2.0.0\n\t */\n\tfunction stickifyElement(el) {\n\t\tvar elWidth = el.getBoundingClientRect().width;\n\t\tel.classList.add('stickify');\n\t\tel.setAttribute('style', 'width: ' + elWidth + 'px; top: 0;');\n\t}\n\n\t/**\n\t * Helper function to denitiate sticky state.\n\t *\n\t * @since 2.0.0\n\t */\n\tfunction unStickifyElement(el) {\n\t\tel.classList.remove('stickify');\n\t\tel.setAttribute('style', '');\n\t}\n\n\t/**\n\t * Helper function to get the offset.\n\t * @param  node   el DOM Node to get the offset for.\n\t * @return object    Object containing offset information.\n\t * @since  2.0.0\n\t */\n\tfunction getOffset(el) {\n\t\tel = el.getBoundingClientRect();\n\t\treturn {\n\t\t\tleft: el.left + window.scrollX,\n\t\t\ttop: el.top + window.scrollY\n\t\t}\n\t}\n\n\t/**\n\t * Manually trigger a scroll event.\n\t * @return undefined\n\t * @since 2.0.0\n\t */\n\tfunction triggerScroll() {\n\t\tvar event = new MouseEvent('scroll', {\n\t\t\t'view': window,\n\t\t\t'bubbles': true,\n\t\t\t'cancelable': false\n\t\t});\n\t\twindow.dispatchEvent(event);\n\t}\n\n})();\n"]}